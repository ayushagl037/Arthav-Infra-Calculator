<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arthav Infra Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .data-row:last-child { border-bottom: none; }
    </style>
</head>
<body class="bg-[#F8F9FA] text-[#1A1A1A] min-h-screen">

    <div class="max-w-6xl mx-auto px-6 py-12">
        <header class="mb-12 border-b border-gray-200 pb-8 flex justify-between items-end">
            <div>
                <h1 class="text-2xl font-semibold tracking-tight uppercase">Arthav Infra Calculator</h1>
                <p class="text-gray-500 mt-2 font-light text-sm">Lease underwriting and yield projection for development assets.</p>
            </div>
            <div id="copy-toast" class="hidden text-[#001F3F] text-xs font-semibold uppercase tracking-widest bg-blue-50 px-4 py-2 rounded-full border border-blue-100">
                Summary Copied
            </div>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            
            <div class="bg-white border border-gray-200 p-6 rounded-sm shadow-sm">
                <h2 class="text-[10px] font-semibold uppercase tracking-widest text-[#001F3F] mb-4">Loan EMI</h2>
                <div class="space-y-3">
                    <input type="text" id="p_amount" value="50,00,000" oninput="formatCurrency(this); calculateEMI();" class="w-full border-b outline-none text-sm font-medium py-1" placeholder="Principal">
                    <div class="grid grid-cols-2 gap-2">
                        <input type="number" id="p_rate" value="8.5" step="0.1" oninput="calculateEMI()" class="border-b outline-none text-xs py-1" placeholder="Rate %">
                        <input type="number" id="p_years" value="20" oninput="calculateEMI()" class="border-b outline-none text-xs py-1" placeholder="Years">
                    </div>
                    <div class="pt-2 text-center bg-gray-50 rounded-sm py-2">
                        <span class="text-[10px] text-gray-400 block uppercase">EMI</span>
                        <span class="text-lg font-semibold text-[#001F3F]">₹ <span id="emi_result">0</span></span>
                    </div>
                </div>
            </div>

            <div class="bg-white border border-gray-200 p-6 rounded-sm shadow-sm">
                <h2 class="text-[10px] font-semibold uppercase tracking-widest text-[#001F3F] mb-4">Two-Way GST (18%)</h2>
                <div class="space-y-4">
                    <div>
                        <label class="text-[9px] uppercase text-gray-400">Add GST to Base</label>
                        <input type="text" id="gst_base_in" value="1,00,000" oninput="formatCurrency(this); solveGST('forward');" class="w-full border-b outline-none text-sm py-1">
                        <div class="text-xs mt-1 font-medium text-[#001F3F]">Total: ₹ <span id="gst_total_out">1,18,000</span></div>
                    </div>
                    <div class="pt-2 border-t border-gray-50">
                        <label class="text-[9px] uppercase text-gray-400">Extract Base from Total</label>
                        <input type="text" id="gst_total_in" value="1,18,000" oninput="formatCurrency(this); solveGST('backward');" class="w-full border-b outline-none text-sm py-1">
                        <div class="text-xs mt-1 font-medium text-slate-500">Base: ₹ <span id="gst_base_out">1,00,000</span></div>
                    </div>
                </div>
            </div>

            <div class="bg-white border border-gray-200 p-6 rounded-sm shadow-sm">
                <h2 class="text-[10px] font-semibold uppercase tracking-widest text-[#001F3F] mb-4">Area Converter</h2>
                <div class="space-y-4">
                    <div class="flex items-center space-x-2">
                        <input type="number" id="area_primary" value="1000" oninput="syncArea('primary')" class="w-full border-b outline-none text-sm py-1 font-medium">
                        <select id="unit_primary" onchange="syncArea('primary')" class="text-[10px] uppercase outline-none bg-transparent">
                            <option value="sqft" selected>Sq Ft</option>
                            <option value="gaj">Gaj</option>
                            <option value="sqmtr">SqM</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="number" id="area_secondary" value="111.11" oninput="syncArea('secondary')" class="w-full border-b outline-none text-sm py-1 font-medium">
                        <select id="unit_secondary" onchange="syncArea('secondary')" class="text-[10px] uppercase outline-none bg-transparent">
                            <option value="sqft">Sq Ft</option>
                            <option value="gaj" selected>Gaj</option>
                            <option value="sqmtr">SqM</option>
                        </select>
                    </div>
                    <p class="text-[9px] text-gray-400 uppercase tracking-tighter italic">* Updates automatically on both sides</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
            
            <div class="md:col-span-12 bg-white border border-gray-200 p-8 rounded-sm shadow-sm">
                <h2 class="text-xs font-semibold uppercase tracking-widest text-[#001F3F] mb-8 border-l-2 border-[#001F3F] pl-3">Lease Underwriting & Yield</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-[10px] uppercase text-gray-400 mb-1">Leasable Area (SF)</label>
                            <input type="text" id="lease_area" value="10,000" oninput="formatCurrency(this); runLeaseCalculations();" class="w-full border-b outline-none py-1 text-md font-light">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase text-gray-400 mb-1">Rent / SF / Month</label>
                            <input type="number" id="rent_psf" value="65" oninput="runLeaseCalculations();" class="w-full border-b outline-none py-1 text-md font-light">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase text-gray-400 mb-1">Total Cost / SF (Land + Build)</label>
                            <input type="text" id="cost_psf" value="8,500" oninput="formatCurrency(this); runLeaseCalculations();" class="w-full border-b outline-none py-1 text-md font-light text-blue-800">
                        </div>
                    </div>

                    <div class="md:col-span-2 bg-[#FBFBFB] p-8 rounded-sm border border-gray-50 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="flex flex-col justify-center">
                            <span class="block text-[10px] uppercase tracking-widest text-gray-400 mb-1">Gross Annual Rent</span>
                            <div class="text-3xl font-light text-[#001F3F]">₹ <span id="annual_rent_res">0</span></div>
                        </div>
                        <div class="flex flex-col justify-center border-l border-gray-200 pl-8">
                            <span class="block text-[10px] uppercase tracking-widest text-gray-400 mb-1">Annual Yield on Cost</span>
                            <div class="text-4xl font-semibold text-[#001F3F]"><span id="yield_res">0</span>%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="md:col-span-12 bg-white border border-gray-200 p-8 rounded-sm shadow-sm">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-xs font-semibold uppercase tracking-widest text-[#001F3F]">9-Year Rent Roll Projection</h2>
                    <div class="flex space-x-6">
                        <div class="flex items-center space-x-2">
                            <span class="text-[10px] uppercase text-gray-400">Escalation %</span>
                            <input type="number" id="esc_rate" value="15" oninput="runLeaseCalculations();" class="w-12 border-b outline-none text-center text-xs">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-[10px] uppercase text-gray-400">Interval (Yrs)</span>
                            <input type="number" id="esc_interval" value="3" oninput="runLeaseCalculations();" class="w-12 border-b outline-none text-center text-xs">
                        </div>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="text-[10px] uppercase text-gray-400 border-b border-gray-100">
                                <th class="pb-4">Year</th>
                                <th class="pb-4">Monthly Rent</th>
                                <th class="pb-4">Annual Income</th>
                                <th class="pb-4 text-right">Cumulative</th>
                            </tr>
                        </thead>
                        <tbody id="rent_roll_body" class="text-sm font-light"></tbody>
                    </table>
                </div>
            </div>

            <div class="md:col-span-12 flex justify-end">
                <button onclick="copySummary()" class="bg-[#001F3F] text-white px-10 py-4 rounded-sm text-[10px] font-semibold uppercase tracking-widest hover:bg-black transition-all">
                    Copy Strategy Summary
                </button>
            </div>
        </div>
    </div>

    <script>
        function formatCurrency(input) {
            let value = input.value.replace(/\D/g, "");
            if (value !== "") input.value = Number(value).toLocaleString('en-IN');
            else input.value = "";
        }

        function calculateEMI() {
            const P = parseFloat(document.getElementById('p_amount').value.replace(/,/g, "")) || 0;
            const r = parseFloat(document.getElementById('p_rate').value) / 12 / 100;
            const n = parseFloat(document.getElementById('p_years').value) * 12;
            if (P && r && n) {
                const emi = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
                document.getElementById('emi_result').innerText = Math.round(emi).toLocaleString('en-IN');
            }
        }

        function solveGST(mode) {
            const rate = 0.18;
            if (mode === 'forward') {
                const base = parseFloat(document.getElementById('gst_base_in').value.replace(/,/g, "")) || 0;
                document.getElementById('gst_total_out').innerText = Math.round(base * (1 + rate)).toLocaleString('en-IN');
            } else {
                const total = parseFloat(document.getElementById('gst_total_in').value.replace(/,/g, "")) || 0;
                document.getElementById('gst_base_out').innerText = Math.round(total / (1 + rate)).toLocaleString('en-IN');
            }
        }

        function syncArea(source) {
            const factors = { sqft: 1, gaj: 9, sqmtr: 10.7639 };
            const unitPrimary = document.getElementById('unit_primary').value;
            const unitSecondary = document.getElementById('unit_secondary').value;
            
            if (source === 'primary') {
                const val = parseFloat(document.getElementById('area_primary').value) || 0;
                const inSqft = val * factors[unitPrimary];
                document.getElementById('area_secondary').value = (inSqft / factors[unitSecondary]).toFixed(2);
            } else {
                const val = parseFloat(document.getElementById('area_secondary').value) || 0;
                const inSqft = val * factors[unitSecondary];
                document.getElementById('area_primary').value = (inSqft / factors[unitPrimary]).toFixed(2);
            }
        }

        function runLeaseCalculations() {
            const area = parseFloat(document.getElementById('lease_area').value.replace(/,/g, "")) || 0;
            const psf = parseFloat(document.getElementById('rent_psf').value) || 0;
            const costPsf = parseFloat(document.getElementById('cost_psf').value.replace(/,/g, "")) || 0;
            const escRate = parseFloat(document.getElementById('esc_rate').value) / 100 || 0;
            const interval = parseInt(document.getElementById('esc_interval').value) || 1;

            const monthlyBase = area * psf;
            const annualBase = monthlyBase * 12;
            const totalCapex = area * costPsf;
            const yield = totalCapex > 0 ? (annualBase / totalCapex) * 100 : 0;

            document.getElementById('annual_rent_res').innerText = Math.round(annualBase).toLocaleString('en-IN');
            document.getElementById('yield_res').innerText = yield.toFixed(2);

            let tableHTML = '';
            let cumulative = 0;
            let currentMonthly = monthlyBase;

            for (let year = 1; year <= 9; year++) {
                if (year > 1 && (year - 1) % interval === 0) currentMonthly *= (1 + escRate);
                const yearAnnual = currentMonthly * 12;
                cumulative += yearAnnual;
                tableHTML += `<tr class="border-b border-gray-50 data-row">
                    <td class="py-4 font-medium text-[#001F3F]">Year ${year}</td>
                    <td class="py-4">₹ ${Math.round(currentMonthly).toLocaleString('en-IN')}</td>
                    <td class="py-4">₹ ${Math.round(yearAnnual).toLocaleString('en-IN')}</td>
                    <td class="py-4 text-right font-semibold">₹ ${Math.round(cumulative).toLocaleString('en-IN')}</td>
                </tr>`;
            }
            document.getElementById('rent_roll_body').innerHTML = tableHTML;
        }

        function copySummary() {
            const summary = `ARTHAV INFRA ANALYSIS\nAnnual Rent: ₹${document.getElementById('annual_rent_res').innerText}\nYield: ${document.getElementById('yield_res').innerText}%`;
            navigator.clipboard.writeText(summary).then(() => {
                const toast = document.getElementById('copy-toast');
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 2000);
            });
        }

        window.onload = () => { calculateEMI(); solveGST('forward'); syncArea('primary'); runLeaseCalculations(); };
    </script>
</body>
</html>